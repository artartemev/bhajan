// File: pages/_app.tsx (версия с тегами для Apple)

import type { AppProps } from 'next/app';
import Head from 'next/head'; // ✅ 1. Импортируем Head
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
import React from 'react';
import { AudioProvider } from './index';
import '../theme.css'; 

const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 5 * 60 * 1000, // 5 minutes
      refetchOnWindowFocus: false,
    },
  },
});

function MyApp({ Component, pageProps }: AppProps) {
  return (
    <QueryClientProvider client={queryClient}>
      {/* ✅ 2. Добавляем Head с мета-тегами и ссылкой на иконку */}
      <Head>
        <title>Bhajan Sangam</title>
        <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
        
        {/* Эти теги делают приложение похожим на нативное на iOS */}
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
        <meta name="apple-mobile-web-app-title" content="Bhajan Sangam" />

        {/* Ссылка на иконку для главного экрана Apple */}
        <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
      </Head>

      <AudioProvider>
        <Component {...pageProps} />
      </AudioProvider>
    </QueryClientProvider>
  );
}

export default MyApp;
